name: Deploy Quote Tool

# è§¦å‘æœºåˆ¶ï¼šæ¨é€åˆ° main åˆ†æ”¯æ—¶è‡ªåŠ¨è¿è¡Œ + æ‰‹åŠ¨è§¦å‘ + æ¯å¤©å®šæ—¶è¿è¡Œï¼ˆUTCï¼‰
on:
  push:
    branches:
      - main
  workflow_dispatch:
  schedule:
    - cron: "0 1 * * *"  # æ¯å¤© UTC 01:00ï¼ˆåŒ—äº¬æ—¶é—´ 09:00ï¼‰

permissions:
  contents: write

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code (æ‹‰å–ä»£ç )
        uses: actions/checkout@v3

      - name: Set up Python (è®¾ç½®Pythonç¯å¢ƒ)
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'

      # ğŸ‘‡ğŸ‘‡ğŸ‘‡ å…³é”®ä¿®æ”¹ï¼šç›´æ¥å®‰è£…ï¼Œä¸å†è¯»å– txt æ–‡ä»¶ï¼Œé˜²æ­¢æŠ¥é”™ ğŸ‘‡ğŸ‘‡ğŸ‘‡
      - name: Install dependencies (å®‰è£…ä¾èµ–åº“)
        run: |
          pip install pandas openpyxl

      - name: Run Generator (æ‰§è¡Œç”Ÿæˆè„šæœ¬)
        run: |
          python generate.py

      - name: Deploy to GitHub Pages (å‘å¸ƒåˆ°ç½‘é¡µ)
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./public
          commit_message: "Auto-deploy: update prices"
